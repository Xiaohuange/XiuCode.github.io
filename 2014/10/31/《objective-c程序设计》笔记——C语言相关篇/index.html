<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>《objective-c程序设计》笔记——C语言相关篇 | 语亮</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="数组的使用
12345678910char letters[5] = {'a','b','c','d','e'};//如果将[]中的数字隐去，则按照{}中元素的具体数目进行数组分配char letters[] = {'a','b','c','d','e'};int numbers[300] = {[9]=1,[3]=7,[1]=29};//任意指定，顺序可以打乱//如果这里[]中的数字隐去，则默认">
<meta property="og:type" content="article">
<meta property="og:title" content="《objective-c程序设计》笔记——C语言相关篇">
<meta property="og:url" content="http://yoursite.com/2014/10/31/《objective-c程序设计》笔记——C语言相关篇/">
<meta property="og:site_name" content="语亮">
<meta property="og:description" content="数组的使用
12345678910char letters[5] = {'a','b','c','d','e'};//如果将[]中的数字隐去，则按照{}中元素的具体数目进行数组分配char letters[] = {'a','b','c','d','e'};int numbers[300] = {[9]=1,[3]=7,[1]=29};//任意指定，顺序可以打乱//如果这里[]中的数字隐去，则默认">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="《objective-c程序设计》笔记——C语言相关篇">
<meta name="twitter:description" content="数组的使用
12345678910char letters[5] = {'a','b','c','d','e'};//如果将[]中的数字隐去，则按照{}中元素的具体数目进行数组分配char letters[] = {'a','b','c','d','e'};int numbers[300] = {[9]=1,[3]=7,[1]=29};//任意指定，顺序可以打乱//如果这里[]中的数字隐去，则默认">

  
    <link rel="alternative" href="/atom.xml" title="语亮" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">

  <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">

  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">语亮</a>
    <div class="collapse navbar-collapse nav-menu">
      <ul class="nav navbar-nav">
      
        <li>
          <a href="/archives">
            <i class="fa fa-archive"></i>
            归档
          </a>
        </li>
      
        <li>
          <a href="/categories">
            <i class="fa fa-folder"></i>
            分类
          </a>
        </li>
      
        <li>
          <a href="/tags">
            <i class="fa fa-tags"></i>
            标签
          </a>
        </li>
      
        <li>
          <a href="/wiki">
            <i class="fa fa-book"></i>
            维基
          </a>
        </li>
      
        <li>
          <a href="/about">
            <i class="fa fa-user"></i>
            关于
          </a>
        </li>
      
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
          <li><a id="rss-link" href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>

      <div id='content' class="container">

        <div class="page-header-wrapper">
          <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
          <div class="page-header">
            <h1 class="title">
          
            《objective-c程序设计》笔记——C语言相关篇
          
            </h1>
        </div>
      </div>
      
      <section id="main"
        
      ><article id="post-miqhepfy0mvgadjz" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    

    
    <div class="article-entry" itemprop="articleBody">
      
        <div id="toc"><span class="toc-header">Contents</span><ol class="article-toc"><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#数组的使用"><span class="article-toc-text">数组的使用</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#块（Block）"><span class="article-toc-text">块（Block）</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#C语言的语法补充"><span class="article-toc-text">C语言的语法补充</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#一个验证##的实例"><span class="article-toc-text">一个验证##的实例</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#malloc,_calloc,realloc之间的区别"><span class="article-toc-text">malloc, calloc,realloc之间的区别</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#小细节语法点"><span class="article-toc-text">小细节语法点</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#块（BLOCK）"><span class="article-toc-text">块（BLOCK）</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#结构体的相互借用"><span class="article-toc-text">结构体的相互借用</span></a></li><li class="article-toc-item article-toc-level-4"><a class="article-toc-link" href="#结构体声明变量的方法"><span class="article-toc-text">结构体声明变量的方法</span></a></li></ol></div><h4 id="数组的使用">数组的使用</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">char</span> letters[<span class="number">5</span>] = {<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>};</div><div class="line"><span class="comment">//如果将[]中的数字隐去，则按照{}中元素的具体数目进行数组分配</span></div><div class="line"><span class="keyword">char</span> letters[] = {<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>};</div><div class="line"><span class="keyword">int</span> numbers[<span class="number">300</span>] = {[<span class="number">9</span>]=<span class="number">1</span>,[<span class="number">3</span>]=<span class="number">7</span>,[<span class="number">1</span>]=<span class="number">29</span>};<span class="comment">//任意指定，顺序可以打乱</span></div><div class="line"><span class="comment">//如果这里[]中的数字隐去，则默认按照最大的下标来分配数组元素数目，即numbers只有10个元素</span></div><div class="line"><span class="keyword">int</span> numbers[] = {[<span class="number">9</span>]=<span class="number">1</span>,[<span class="number">3</span>]=<span class="number">7</span>,[<span class="number">1</span>]=<span class="number">29</span>};<span class="comment">//任意指定，顺序可以打乱</span></div><div class="line"></div><div class="line"><span class="keyword">char</span> word[] = {<span class="string">'H'</span>,<span class="string">'e'</span>,<span class="string">'l'</span>,<span class="string">'l'</span>,<span class="string">'o'</span>,<span class="string">'\0'</span>};</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%s"</span>,word);</div><div class="line"><span class="comment">//输出的是“Hello”，因为NSLog会持续显示字符，直到遇到空字符</span></div></pre></td></tr></table></figure>

<p>将函数声明写在文件的开头是一个好习惯，即使调用的函数在前面已经定义，也要尽量把该函数在文件头进行声明一下，这样才能保证编译的正确性。</p>
<h4 id="块（Block）">块（Block）</h4>
<p>块定义在函数或者方法的内部，相当于一个简单的内嵌函数，它可以访问块之外函数之内的任意变量</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">void</span>)(^printmessage)(<span class="keyword">void</span>)=</div><div class="line">^(<span class="keyword">void</span>)<span class="comment">//括号里面的是传入的参数类型</span></div><div class="line">{</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"Hello"</span>);</div><div class="line">};<span class="comment">//不要忘记这个分号</span></div><div class="line">...</div><div class="line">...</div><div class="line">printmessage();<span class="comment">//调用方式不变</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#import<span class="title">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</div><div class="line">{</div><div class="line"><span class="keyword">@autoreleasepool</span></div><div class="line">{</div><div class="line"></div><div class="line"><span class="keyword">int</span> foo = <span class="number">10</span>;<span class="comment">//输出结果为10，说明块方法在定义的时候就已经捆绑了变量的值</span></div><div class="line">__block <span class="keyword">int</span> foo = <span class="number">10</span>;<span class="comment">//输出结果为15，说明块方法在运行的时候才捆绑变量的值</span></div><div class="line"><span class="keyword">void</span>(^printFoo)(<span class="keyword">void</span>)=</div><div class="line">^(<span class="keyword">void</span>)</div><div class="line">{</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"foo = %i"</span>,foo);</div><div class="line">};</div><div class="line"></div><div class="line">foo = <span class="number">15</span>;</div><div class="line">printFoo();</div><div class="line">}</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#import<span class="title">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</div><div class="line">{</div><div class="line"><span class="keyword">@autoreleasepool</span></div><div class="line">{</div><div class="line"></div><div class="line">__block <span class="keyword">int</span> foo = <span class="number">10</span>;<span class="comment">//只有定义成块变量，foo才可以在块中更改值</span></div><div class="line"></div><div class="line"><span class="keyword">void</span>(^printFoo)(<span class="keyword">void</span>)=</div><div class="line">^(<span class="keyword">void</span>)</div><div class="line">{</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"foo = %i"</span>,foo);</div><div class="line">foo = <span class="number">20</span>;</div><div class="line">};</div><div class="line"></div><div class="line">foo = <span class="number">15</span>;</div><div class="line">printFoo();<span class="comment">//输出15</span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"foo = %i"</span>,foo);<span class="comment">//输出20</span></div><div class="line">}</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="C语言的语法补充">C语言的语法补充</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  main.c</span></div><div class="line"><span class="comment">//  helloword</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by 修宇亮 on 14-7-16.</span></div><div class="line"><span class="comment">//  Copyright (c) 2014年 修宇亮. All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdlib.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> student{</div><div class="line"></div><div class="line"><span class="keyword">int</span> age;</div><div class="line"><span class="keyword">int</span> grade;</div><div class="line"><span class="keyword">char</span> *name;</div><div class="line"></div><div class="line">};</div><div class="line"></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> SIZE_OF_ARRAY(a) sizeof(a)/sizeof(a[0])</span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> HELLO(name) void name##girl(){ \</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"hello girl"</span>); \</div><div class="line">}<span class="comment">// \起到续行的作用</span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> MYFUNC(name) void name##INIT()</span></div><div class="line"></div><div class="line"></div><div class="line">MYFUNC(xyl);</div><div class="line">HELLO(xyl);</div><div class="line"></div><div class="line"><span class="keyword">void</span> xylINIT(){<span class="built_in">printf</span>(<span class="string">"xyl is so cool!"</span>);}</div></pre></td></tr></table></figure>


<h4 id="一个验证##的实例">一个验证##的实例</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#import&lt;Foundation/Foundation.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> INITNAME() {\</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"Hello xyl1\n"</span>);\</div><div class="line">}</div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> HELLONAME(name) name##hello()<span class="comment">//这里不要写上void，会无法连接到xylhello()</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> xylhello(){</div><div class="line"><span class="built_in">printf</span>(<span class="string">"Hello xyl2\n"</span>);</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</div><div class="line">{</div><div class="line">INITNAME();</div><div class="line">HELLONAME(xyl);</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">typedef <span class="keyword">int</span>  long_byte_four;<span class="comment">//给数据类型重新命名类型名</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> a = <span class="number">12</span>;</div><div class="line"><span class="keyword">int</span> b = <span class="number">34</span>;</div><div class="line"><span class="keyword">int</span> *p1 = &a;</div><div class="line"><span class="keyword">int</span> *p2 = &b;</div><div class="line"></div><div class="line"><span class="keyword">void</span> swap01(<span class="keyword">int</span>,<span class="keyword">int</span>);</div><div class="line"><span class="keyword">void</span> swap02(<span class="keyword">int</span> *,<span class="keyword">int</span> *);</div><div class="line"><span class="keyword">void</span> swap03(<span class="keyword">int</span> **,<span class="keyword">int</span> **);</div><div class="line"><span class="keyword">void</span> swap04(<span class="keyword">int</span> *,<span class="keyword">int</span> *);</div><div class="line"><span class="keyword">void</span> testmalloc();</div><div class="line"><span class="keyword">void</span> testcalloc();</div><div class="line"><span class="keyword">void</span> testrealloc(<span class="keyword">int</span> *);</div><div class="line"><span class="keyword">void</span> testvoid();</div><div class="line"><span class="keyword">void</span> test_type_rename();</div><div class="line"><span class="keyword">void</span> test_byte();</div><div class="line"><span class="keyword">void</span> test_pointer();</div><div class="line"><span class="keyword">void</span> test_pointer_func();</div><div class="line"><span class="keyword">void</span> test_pointer_string();</div><div class="line"><span class="keyword">void</span> test_struct();</div><div class="line"><span class="keyword">void</span> common_swap();</div><div class="line"><span class="keyword">void</span> hong();</div><div class="line"><span class="keyword">void</span> swap(<span class="keyword">void</span> *,<span class="keyword">void</span> *,<span class="keyword">int</span> );</div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, const <span class="keyword">char</span> * argv[])</div><div class="line">{</div><div class="line"></div><div class="line">test_byte();<span class="comment">//测试每一种数据类型的字节数</span></div><div class="line">test_type_rename();<span class="comment">//测试数据类型重新命名类型名</span></div><div class="line">test_pointer();<span class="comment">//测试指针的用途</span></div><div class="line">test_pointer_func();<span class="comment">//指针函数和函数指针</span></div><div class="line">test_pointer_string();<span class="comment">//字符串数组和指针字符串</span></div><div class="line">test_struct();</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//四种交换算法（原数，地址，指针）</span></div><div class="line">swap01(a, b);</div><div class="line">swap02(&a, &b);</div><div class="line">swap03(&p1, &p2);</div><div class="line">swap04(p1, p2);</div><div class="line"></div><div class="line">testmalloc();<span class="comment">//malloc分配单块内存空间函数</span></div><div class="line">testcalloc();<span class="comment">///calloc连续分配内存空间函数</span></div><div class="line">testrealloc(p2);<span class="comment">//realloc重新定义内存分配空间的函数</span></div><div class="line"></div><div class="line">common_swap();</div><div class="line">hong();</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//可以被普遍使用的泛型swap</span></div><div class="line"></div><div class="line"><span class="keyword">void</span> swap(<span class="keyword">void</span> *p1,<span class="keyword">void</span> *p2,<span class="keyword">int</span> <span class="keyword">size</span>){</div><div class="line"></div><div class="line"><span class="keyword">char</span> *charat1 = (<span class="keyword">char</span> *)p1;</div><div class="line"><span class="keyword">char</span> *charat2 = (<span class="keyword">char</span> *)p2;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="keyword">size</span>;i++){</div><div class="line"></div><div class="line"><span class="keyword">int</span> temp;</div><div class="line">temp = *(charat1+i);</div><div class="line">*(charat1+i) = *(charat2+i);</div><div class="line">*(charat2+i) = temp;</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//void型变量的通用特性</span></div><div class="line"><span class="keyword">void</span> testvoid(){</div><div class="line"></div><div class="line"><span class="keyword">int</span> *t1 = <span class="keyword">NULL</span>;</div><div class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</div><div class="line">t1 = &a;</div><div class="line"><span class="keyword">void</span> *v1 = <span class="keyword">NULL</span>;</div><div class="line">v1 = t1;</div><div class="line"></div><div class="line"><span class="keyword">long</span> *t2 = <span class="keyword">NULL</span>;</div><div class="line"><span class="keyword">long</span> b = <span class="number">78687698679867</span>;</div><div class="line">t2 = &b;</div><div class="line"><span class="keyword">void</span> *v2 = <span class="keyword">NULL</span>;</div><div class="line">v2 = t2;</div><div class="line"></div><div class="line">printf(<span class="string">"v1 = %d\n"</span>,*(<span class="keyword">int</span> *)v1);</div><div class="line">printf(<span class="string">"v2 = %ld\n"</span>,*(<span class="keyword">long</span> *)v2);</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="malloc,_calloc,realloc之间的区别">malloc, calloc,realloc之间的区别</h4>
<p>void<em> realloc(void</em> ptr, unsigned newsize);<br>void<em> malloc(unsigned size);<br>void</em> calloc(size_t nelem, size_t elsize);<br>都在stdlib.h函数库内</p>
<p>它们的返回值都是请求系统分配的地址,如果请求失败就返回NULL</p>
<p>malloc用于申请一段新的地址,参数size为需要内存空间的长度,如:<br>char<em> p;<br>p=(char</em>)malloc(20);</p>
<p>calloc与malloc相似,参数elsize 为申请地址的单位元素长度,nelem为元素个数,如:<br>char<em> p;<br>p=(char</em>)calloc(20, sizeof(char));<br>这个例子与上一个效果相同</p>
<p>realloc是给一个已经分配了地址的指针重新分配空间,参数ptr为原有的空间地址,newsize是重新申请的地址长度 </p>
<p>如:<br>char<em> p;<br>p=(char</em>)malloc(sizeof(char)<em>20);<br>p=(char</em>)realloc(p,sizeof(char)*40);<br>注意，这里的空间长度都是以字节为单位。</p>
<p>C语言的标准内存分配函数：malloc，calloc，realloc等。<br>malloc与calloc的区别为1块与n块的区别：<br>malloc调用形式为(类型<em>)malloc(size)：在内存的动态存储区中分配一块长度为“size”字节的连续区域，返回该区域的首地址。<br>calloc调用形式为(类型</em>)calloc(n，size)：在内存的动态存储区中分配n块长度为“size”字节的连续区域， 每一位都初始化为零，返回首地址。<br>realloc调用形式为(类型<em>)realloc(</em>ptr，size)：将ptr内存大小增大到size。</p>
<p>free的调用形式为free(void*ptr)：释放ptr所指向的一块内存空间。<br>C++中为new/delete函数。 </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//malloc分配单块内存空间函数</span></div><div class="line"><span class="keyword">void</span> testmalloc(){</div><div class="line"></div><div class="line"><span class="comment">//对p的单帧并没有清零，数值为随机数</span></div><div class="line"><span class="keyword">int</span> *p = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line"><span class="keyword">if</span>(p != NULL){</div><div class="line">*p = <span class="number">1234</span>;</div><div class="line"></div><div class="line">}<span class="keyword">else</span>{</div><div class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"*p = %d\n"</span>,*p);</div><div class="line"><span class="built_in">free</span>(p);</div><div class="line">p = NULL;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//calloc连续分配内存空间函数</span></div><div class="line"><span class="keyword">void</span> testcalloc(){</div><div class="line"></div><div class="line"><span class="comment">//对p的每一帧都实现清零</span></div><div class="line"><span class="keyword">int</span> *p = <span class="built_in">calloc</span>(<span class="number">5</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line"><span class="keyword">if</span>(p !=NULL){</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++){</div><div class="line">*(p+i) = i+<span class="number">2</span>;</div><div class="line"><span class="built_in">printf</span>(<span class="string">"*p = %d\n"</span>,*(p+i));</div><div class="line">}</div><div class="line">}<span class="keyword">else</span>{</div><div class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">}</div><div class="line"></div><div class="line">testrealloc(p);</div><div class="line">p = NULL;</div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//realloc重新定义内存分配空间的函数</span></div><div class="line"><span class="keyword">void</span> testrealloc( <span class="keyword">int</span> *p2){</div><div class="line"></div><div class="line"><span class="keyword">int</span> *re_p = realloc(p2, <span class="number">10</span>);</div><div class="line"><span class="keyword">if</span>(re_p !=NULL){</div><div class="line"></div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">5</span>;i&lt;<span class="number">10</span>;i++){</div><div class="line">*(re_p+i) = i+<span class="number">2</span>;</div><div class="line">}</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++){</div><div class="line"><span class="built_in">printf</span>(<span class="string">"*re_p = %d\n"</span>,*(re_p+i));</div><div class="line">}</div><div class="line">}<span class="keyword">else</span>{</div><div class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">}</div><div class="line"><span class="built_in">free</span>(re_p);</div><div class="line">re_p = NULL;</div><div class="line">p2 = NULL;</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> test_type_rename(){</div><div class="line">long_byte_four a1 = <span class="number">123</span>;</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a1 == %d\n"</span>,a1);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> add(<span class="keyword">int</span> a,<span class="keyword">int</span> b){</div><div class="line"><span class="keyword">return</span> a+b;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> multiple(<span class="keyword">int</span> (*func)(<span class="keyword">int</span>,<span class="keyword">int</span>),<span class="keyword">int</span> n1,<span class="keyword">int</span> n2){</div><div class="line"><span class="keyword">return</span> func(n1,n2)*n1;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//测试通用性交换算法</span></div><div class="line"><span class="keyword">void</span> common_swap(){</div><div class="line"></div><div class="line"><span class="keyword">int</span> a = <span class="number">123</span>;</div><div class="line"><span class="keyword">int</span> b = <span class="number">456</span>;</div><div class="line"></div><div class="line"><span class="keyword">char</span> ch1[] = <span class="string">"xiuyuliang"</span>;</div><div class="line"><span class="keyword">char</span> ch2[] = <span class="string">"wangruihah"</span>;</div><div class="line"></div><div class="line"></div><div class="line">swap(&a,&b,<span class="keyword">sizeof</span>(a));</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line"></div><div class="line">swap(ch1, ch2, <span class="keyword">sizeof</span>(ch1));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch1 = %s\n"</span>,ch1);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch2 = %s\n"</span>,ch2);</div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> swap01(<span class="keyword">int</span> t1,<span class="keyword">int</span> t2){</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"最原始的纯数据交换(a,b)\n"</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line"><span class="keyword">int</span> temp;</div><div class="line">temp = t1;</div><div class="line">t1 = t2;</div><div class="line">t2 = temp;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> swap02(<span class="keyword">int</span> *t1,<span class="keyword">int</span> *t2){</div><div class="line"></div><div class="line"><span class="comment">//swap02(&a, &b);</span></div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"仅仅交换副本指针的地址(&t1,&t2)\n"</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line"><span class="keyword">int</span> *temp = NULL;</div><div class="line">temp = t1;</div><div class="line">t1 = t2;</div><div class="line">t2 = temp;</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"t1 = %d\n"</span>,*t1);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"t2 = %d\n"</span>,*t2);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> swap03(<span class="keyword">int</span> **t1,<span class="keyword">int</span> **t2){</div><div class="line"></div><div class="line"><span class="comment">// swap03(&p1, &p2);</span></div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"真正交换了原始指针(p1,p2)\n"</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line"><span class="keyword">int</span> *temp = NULL;</div><div class="line">temp = *t1;</div><div class="line">*t1 = *t2;</div><div class="line">*t2 = temp;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"t1 = %d\n"</span>,**t1);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"t2 = %d\n"</span>,**t2);</div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> swap04(<span class="keyword">int</span> *t1,<span class="keyword">int</span> *t2){</div><div class="line"></div><div class="line"><span class="comment">//swap04(p1, p2);</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"真正交换了原值(a,b)\n"</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line"><span class="keyword">int</span> temp ;</div><div class="line">temp = *t1;</div><div class="line">*t1 = *t2;</div><div class="line">*t2 = temp;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %d\n"</span>,b);</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> test_byte(){</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"char_byte === %ld\n"</span> ,<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"int_byte === %ld\n"</span> ,<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"long_byte === %ld\n"</span> ,<span class="keyword">sizeof</span>(<span class="keyword">long</span>));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"short_byte === %ld\n"</span> ,<span class="keyword">sizeof</span>(<span class="keyword">short</span>));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"double_byte === %ld\n"</span> ,<span class="keyword">sizeof</span>(<span class="keyword">double</span>));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"long double_byte === %ld\n"</span> ,<span class="keyword">sizeof</span>(<span class="keyword">long</span> <span class="keyword">double</span>));</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//测试指针的用途</span></div><div class="line"><span class="keyword">void</span> test_pointer(){</div><div class="line"></div><div class="line"><span class="keyword">int</span> a = <span class="number">123</span>;</div><div class="line"><span class="keyword">int</span> *b = &a;</div><div class="line"><span class="keyword">int</span> **c = &b;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"a = %d\n"</span>,a);<span class="comment">//a的值</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"&a = %p\n"</span>,&a);<span class="comment">//a的地址</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"b = %p\n"</span>,b);<span class="comment">//b存的a的地址</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"&b = %p\n"</span>,&b);<span class="comment">//b的地址</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"*b = %d\n"</span>,*b);<span class="comment">//b存的地址解码为a的值</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"c = %p\n"</span>,c);<span class="comment">//c存的b的地址</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"*c = %p\n"</span>,*c);<span class="comment">//c存的b的地址解码为b的值，即a的地址</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"**c = %d\n"</span>,**c);<span class="comment">//c解码两次，第一次解码为b的值，即a的地址，第二次解码为a的值，为123</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"&c = %p\n"</span>,&c);<span class="comment">//c的地址</span></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//指针函数和函数指针</span></div><div class="line"><span class="comment">//指针函数和函数指针的主要用途是作为参数传入函数或者方法</span></div><div class="line"><span class="keyword">void</span> test_pointer_func(){</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> add(<span class="keyword">int</span> ,<span class="keyword">int</span>);</div><div class="line"><span class="keyword">int</span> (*pfunc)(<span class="keyword">int</span> a,<span class="keyword">int</span> b);</div><div class="line">pfunc = add;</div><div class="line"><span class="keyword">int</span> result = pfunc(<span class="number">13</span>,<span class="number">12</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"a+b ==  %d\n"</span>,result);</div><div class="line"></div><div class="line"><span class="keyword">int</span> multiple(<span class="keyword">int</span> (*func)(<span class="keyword">int</span>,<span class="keyword">int</span>),<span class="keyword">int</span> n1,<span class="keyword">int</span> n2);</div><div class="line"><span class="keyword">int</span> result2 = multiple(add, <span class="number">5</span>, <span class="number">3</span>);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"(a+b)*a = %d\n"</span>, result2);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//字符串数组和指针字符串</span></div><div class="line"><span class="keyword">void</span> test_pointer_string(){</div><div class="line"></div><div class="line"><span class="keyword">char</span> ch1[] = <span class="string">"success"</span>;</div><div class="line"><span class="keyword">char</span> *ch2 = <span class="string">"success2"</span>;</div><div class="line"><span class="keyword">char</span> *ch3 = <span class="string">"success3"</span>;</div><div class="line"><span class="keyword">char</span> *ch2_copy = <span class="string">"success2"</span>;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch1 = %s\n"</span>,ch1);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch1的地址 = %p\n"</span>,ch1);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch2 = %s\n"</span>,ch2);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch2的地址 = %p\n"</span>,ch2);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch2_copy的地址 = %p\n"</span>,ch2_copy);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch3 = %s\n"</span>,ch3);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"ch3的地址 = %p\n"</span>,ch3);</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//测试结构体输出</span></div><div class="line"></div><div class="line"><span class="keyword">void</span> test_struct(){</div><div class="line"><span class="keyword">struct</span> student *s1 = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> student));</div><div class="line"><span class="keyword">if</span>(s1 !=NULL){</div><div class="line"></div><div class="line">s1-&gt;age = <span class="number">23</span>;</div><div class="line">s1-&gt;grade = <span class="number">8</span>;</div><div class="line">s1-&gt;name = <span class="string">"xyl"</span>;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"s1.age = %d\n"</span>,s1-&gt;age);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"s1.grade = %d\n"</span>,s1-&gt;grade);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"s1.name = %s\n"</span>,s1-&gt;name);</div><div class="line"></div><div class="line">}<span class="keyword">else</span>{</div><div class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">free</span>(s1);</div><div class="line">s1 = NULL;</div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//检测宏定义的输出</span></div><div class="line"><span class="keyword">void</span> hong(){</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> a[] = {<span class="number">1</span>,<span class="number">23</span>,<span class="number">45</span>,<span class="number">9</span>,<span class="number">23</span>,<span class="number">89</span>};</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"array_size = %ld\n"</span>,SIZE_OF_ARRAY(a));</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,__LINE__);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%s\n"</span>,__FILE__);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%s\n"</span>,__TIME__);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%s\n"</span>,__DATE__);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,__STDC__);</div><div class="line">xylINIT();</div><div class="line">xylgirl();</div><div class="line"></div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="小细节语法点">小细节语法点</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> x =<span class="number">123</span>;</div><div class="line"><span class="keyword">int</span> a[] = {[<span class="number">7</span>]=<span class="number">1</span>,[<span class="number">0</span>]=x+<span class="number">1</span>,[<span class="number">4</span>]=<span class="number">5</span>};<span class="comment">//针对性的设置数组中的特定数值，其余为0</span></div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">char</span> ch1[<span class="number">80</span>] = <span class="string">"nihao woshi nidie"</span>;</div><div class="line"><span class="keyword">char</span> *ch2 = <span class="string">"nihao woshi nidei"</span>;</div><div class="line"><span class="comment">//这两个都可以运行顺利，但是意义不同，一个是表示一段内存区域的数值分配，另一个是引用一个指针指向一个字符数组</span></div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//空语句的功能</span></div><div class="line"><span class="comment">//功能是将键盘输入的字符存储到test指针指向的内存空间</span></div><div class="line"><span class="keyword">while</span>((*test = getchar()) != <span class="string">''</span>)</div><div class="line">;<span class="comment">//空语句</span></div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//goto语句，实际上是一种执行跳转语句，直接跳转到goto后面标签标注的语句</div><div class="line">//这是一种很不好的编程习惯，不利于他人对程序的理解</div><div class="line">goto out_of_data;</div><div class="line"><span class="keyword">...</span></div><div class="line"><span class="keyword">...</span></div><div class="line"><span class="keyword">...</span></div><div class="line">out_of_data: NSLog(@<span class="string">"out of data"</span>);</div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="type">int</span> arraySum(<span class="type">int</span> <span class="type">array</span>[], <span class="type">int</span> n)</div><div class="line"><span class="type">int</span> *arrayEnd = <span class="type">array</span>+n;</div><div class="line">//这里面虽然写的是arrgy[]，但其实传入之后的<span class="type">array</span>其实是一个地址，而且是数组的首地址</div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//一个例子说明这个问题</span></div><div class="line"><span class="preprocessor">#import<span class="title">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> arraySum(<span class="keyword">int</span> array[], <span class="keyword">int</span> n)</div><div class="line">{</div><div class="line"><span class="keyword">int</span> *pr,*arrayEnd;</div><div class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">arrayEnd = array + n;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(pr=array;pr&lt;arrayEnd;pr++)</div><div class="line">{</div><div class="line">sum += *pr;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">return</span> sum;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</div><div class="line">{</div><div class="line"><span class="keyword">@autoreleasepool</span></div><div class="line">{</div><div class="line"><span class="keyword">int</span> value[<span class="number">10</span>] = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>};</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"The sum is %i"</span>,arraySum(value,<span class="number">10</span>));</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void NSLog(NSString *format,<span class="keyword">...</span>);//<span class="keyword">...</span>用途是声明参数有不定数目</div></pre></td></tr></table></figure>

<h4 id="块（BLOCK）">块（BLOCK）</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> (^calculateTriangleNumber)(<span class="keyword">int</span>) =</div><div class="line">^(<span class="keyword">int</span> n)</div><div class="line">{	</div><div class="line"><span class="keyword">int</span> triangleNumber = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">{</div><div class="line">triangleNumber += i;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"The triangleNumber of %i is %i"</span>,n,triangleNumber);</div><div class="line">};<span class="comment">//分号一定不要忘记，因为这是一个句子</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc,<span class="keyword">char</span> *argv[])</div><div class="line">{</div><div class="line"><span class="keyword">@autoreleasepool</span></div><div class="line">{</div><div class="line">calculateTriangleNumber(<span class="number">10</span>);</div><div class="line">calculateTriangleNumber(<span class="number">20</span>);</div><div class="line">calculateTriangleNumber(<span class="number">50</span>);</div><div class="line">}</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="结构体的相互借用">结构体的相互借用</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc,<span class="keyword">char</span> *argv[])</div><div class="line">{</div><div class="line"></div><div class="line"><span class="keyword">@autoreleasepool</span>{</div><div class="line"></div><div class="line"><span class="keyword">struct</span> <span class="built_in">CGPoint</span></div><div class="line">{</div><div class="line"><span class="built_in">CGFloat</span> x;</div><div class="line"><span class="built_in">CGFloat</span> y;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">CGPoint</span> <span class="built_in">CGPoint</span>;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> <span class="built_in">CGSize</span>	</div><div class="line">{</div><div class="line"><span class="built_in">CGFloat</span> width;</div><div class="line"><span class="built_in">CGFloat</span> height;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">CGSize</span> <span class="built_in">CGSize</span>;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> <span class="built_in">CGRect</span></div><div class="line">{</div><div class="line"><span class="built_in">CGPoint</span> origin;</div><div class="line"><span class="built_in">CGSize</span>  size;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">CGRect</span> <span class="built_in">CGRect</span>;</div><div class="line"><span class="built_in">CGRect</span>  rect1 ;</div><div class="line"><span class="built_in">CGPoint</span> startp;</div><div class="line"><span class="built_in">CGSize</span>  range;</div><div class="line"></div><div class="line">startp<span class="variable">.x</span> = <span class="number">100.0</span>;</div><div class="line">startp<span class="variable">.y</span> = <span class="number">200.0</span>;</div><div class="line"></div><div class="line">range<span class="variable">.width</span> = <span class="number">20.0</span>;</div><div class="line">range<span class="variable">.height</span> = <span class="number">40.0</span>;</div><div class="line"></div><div class="line">rect1<span class="variable">.origin</span> = startp;</div><div class="line">rect1<span class="variable">.size</span> = range;</div><div class="line"></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"The rectangle :\n"</span>);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"width: %f"</span>,rect1<span class="variable">.size</span><span class="variable">.width</span>);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"height: %f"</span>,rect1<span class="variable">.size</span><span class="variable">.height</span>);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"origin: (%f,%f)"</span>,rect1<span class="variable">.origin</span><span class="variable">.x</span>,rect1<span class="variable">.origin</span><span class="variable">.y</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="结构体声明变量的方法">结构体声明变量的方法</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//在结构体中声明多个变量</span></div><div class="line"><span class="keyword">struct</span> date</div><div class="line">{</div><div class="line"><span class="keyword">int</span> year;</div><div class="line"><span class="keyword">int</span> month;</div><div class="line"><span class="keyword">int</span> day;</div><div class="line">}today,tomorrow;</div><div class="line"></div><div class="line"><span class="comment">//直接在结构体中声明定义变量</span></div><div class="line"><span class="keyword">struct</span> date</div><div class="line">{</div><div class="line"><span class="keyword">int</span> year;</div><div class="line"><span class="keyword">int</span> month;</div><div class="line"><span class="keyword">int</span> day;</div><div class="line">}today = {<span class="number">2013</span>,<span class="number">2</span>,<span class="number">4</span>};</div><div class="line"></div><div class="line"><span class="keyword">struct</span> today = {<span class="number">2014</span>,<span class="number">1</span>,<span class="number">21</span>};</div><div class="line"><span class="comment">//直接的初始化方式</span></div><div class="line"><span class="keyword">struct</span> today = {.month = <span class="number">2</span>,.year = <span class="number">1</span>,.day = <span class="number">21</span>};</div><div class="line"><span class="comment">//可以打乱方式用.member = value赋值</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//定义100天</span></div><div class="line"><span class="keyword">struct</span> </div><div class="line">{</div><div class="line"><span class="keyword">int</span> year;</div><div class="line"><span class="keyword">int</span> month;</div><div class="line"><span class="keyword">int</span> day;</div><div class="line">}date[<span class="number">100</span>];</div></pre></td></tr></table></figure>


      
    </div>
  </div>
</article>

</section>
        
          
<aside id="sidebar">
  
    
      
<div class="widget-wrap center">
  <ul class="pagination">
    <li>
      
        <span class="nav-prev disabled">Prev</span>
      
    </li>
    <li>
      <a data-url="http://yoursite.com/2014/10/31/《objective-c程序设计》笔记——C语言相关篇/" data-id="miqhepfy0mvgadjz" data_title="《objective-c程序设计》笔记——C语言相关篇"
        data_summary="数组的使用
12345678910char letters[5] = {'a','b','c','d','e'};//如果将[]中的数字隐去，则按照{}中元素的具体数目进行数组分配char letters[] = {'a','b','c','d','e'}..." class="article-share-link">Share</a>
    </li>
    <li>
      
        <a href="/2014/10/31/《objective-c程序设计》笔记——语法篇/" class="nav-next">Next</a>
      
    </li>
  </ul>
</div>


    
      <div class="widget-wrap">
  <div class="post-widget">
    <i class="fa fa-clock-o"></i>
    <time datetime="2014-10-30T17:21:26.000Z" itemprop="datePublished">10月 31 2014</time>
  </div>
</div>

    
      
  <div class="widget-wrap">
    <div class="post-widget">
      <i class="fa fa-folder"></i>
      <a class="category-link" href="/categories/编程学习/">编程学习<span class="category-count">2</span></a>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="post-widget">
      <i class="fa fa-tags"></i>
      <a class="tag-link" href="/tags/C语言/">C语言<span class="tag-count">2</span></a><a class="tag-link" href="/tags/objective-c/">objective-c<span class="tag-count">2</span></a>
    </div>
  </div>


    
  
</aside>


        
      </div>
      <footer id="footer">
  
  <div class="outer container">
    <div id="footer-info" class="inner">
      <a href="/">语亮</a> &copy; 2014 Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/seff/nut" target="_blank">Nut</a>
    </div>
  </div>
</footer>
<a id="gotop" href="#">
  <i class="fa fa-chevron-up"></i>
</a>

    </div>
    <nav id="mobile-nav">
  
    <a href="[object Object]" class="mobile-nav-link">0</a>
  
    <a href="[object Object]" class="mobile-nav-link">1</a>
  
    <a href="[object Object]" class="mobile-nav-link">2</a>
  
    <a href="[object Object]" class="mobile-nav-link">3</a>
  
    <a href="[object Object]" class="mobile-nav-link">4</a>
  
</nav>

    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/js/jquery.fitvids.js" type="text/javascript"></script>

<script src="/js/bootstrap.min.js" type="text/javascript"></script>

<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>
